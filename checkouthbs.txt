<div class="ckeckout-cover">
    <div class="checkout-container-flex">

        <div class="mobile-total">
            <p class="total-mob-view">Total Rs: {{total}}</p>

        </div>


        <div class="address-detaisl">

            <div class="address-details-form-div">

                <div class="contact-and-shipp-to-div">
                    <div class="contact">
                        <p class="c-s">Contact</p>
                        <p><span id="email"></span></p>
                    </div>
                    <div class="shipp-to">
                        <p class="c-s">Shipp to</p>

                        <p><span id="fname"></span> <span id="lname"></span></p>
                        <p><span id="country"></span></p>
                        <p><span id="address"></span></p>
                        <p><span id="appartment"></span></p>
                        <p><span id="city"></span></p>
                        <p><span id="state"></span></p>
                        <p>Pincode:<span id="pincode"></span></p>
                        <p>Phone:<span id="phone"></span></p>

                    </div>
                </div>

                <p class="select-payment-method">Select Payment Method</p>
                <div class="payment-method-div">




                    <div class="container">
                        <div class="cod-div">
                            <input type="radio" name="username" value="Cod">
                            <label>Cod(Cash on delivery)</label>
                        </div>
                        <div class="online-payment-div">
                            <input type="radio" name="username" value="OnlinePayment" checked>
                            <label>Online payment</label>
                        </div>
                    </div>



                </div>

                <button onclick="checkout()" class="continueShipping">Compete order</button>


                <p><a class="return-tocart" href="/shippingAddress">
                        < Return to shipping</a>
                </p>
            </div>
        </div>


        <div class="discount-and-products-total">
            <div class="scroll">
                {{#each usercart.cartitems}}
                <div class="product-details-and-image">
                    <div class="proimage-and-details-div">
                        <div class="proimage-div">
                            <img class="proimage" src="/upload/{{product.image.[0].img}}" alt="">
                        </div>

                        <div class="circle">
                            <span class="circle__content">{{quantity}}</span>
                        </div>

                        <div class="prodetails">
                            <p>{{product.name}}</p>
                        </div>
                        <div class="prodetails-price">
                            <p>${{product.price}}</p>
                        </div>
                    </div>
                </div>
                {{/each}}
            </div>


            <div class="discount-div">
                <input class="discount-input" type="text" id="discount" name="discount" placeholder="Discount code">
                <button class="appay-button">Apply</button>
            </div>

            <div class="total-div">
                <div class="sub-and-ship">
                    <div class="total-flex">
                        <p>Subtotal</p>
                        <p>$299.00</p>

                    </div>
                    <div class="total-flex ">
                        <p>Shipping</p>
                        <p>$49</p>
                    </div>
                </div>
                <div class="total-flex">
                    <p>Total</p>
                    <h2>INR ${{total}}</h2>
                </div>
            </div>

        </div>
    </div>
</div>

<script>









    var addressDetails = JSON.parse(localStorage.getItem('addressDetails'))
    console.log("addressDetails..", addressDetails)
    console.log("email...", addressDetails.email)


    document.getElementById('email').textContent = addressDetails.email
    document.getElementById('fname').textContent = addressDetails.fname
    document.getElementById('lname').textContent = addressDetails.lname
    document.getElementById('address').textContent = addressDetails.address
    document.getElementById('appartment').textContent = addressDetails.appartment
    document.getElementById('city').textContent = addressDetails.city
    document.getElementById('state').textContent = addressDetails.state
    document.getElementById('pincode').textContent = addressDetails.pincode
    document.getElementById('phone').textContent = addressDetails.phone






    function checkout() {




        let selected = document.querySelector('input[type="radio"]:checked');
        var payment = selected.value;

        console.log("hello 2..", payment)

        $.ajax({
            url: '/place-order',
            method: 'post',
            data: {
                email: addressDetails.email,
                country: addressDetails.country,
                fname: addressDetails.fname,
                lname: addressDetails.lname,
                address: addressDetails.address,
                appartment: addressDetails.appartment,
                city: addressDetails.city,
                state: addressDetails.state,
                pincode: addressDetails.pincode,
                phone: addressDetails.phone,
                payment: payment,
            },
            success: (response) => {

                localStorage.clear()

                alert(response)
            }
        })
    }



</script>