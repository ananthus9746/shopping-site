<div class="cart-cover">
    <p class="cart-text">Your Cart</p>

    <div class="cart-container-flex">

        <div class="p-q-t">
            <div class="cart-prce-quantity-total-flex">
                <p>PRICE</p>
                <P>QUANTITY</P>
                <P>TOTAL</P>
            </div>
        </div>
        {{#each usercart.cartitems}}
        <div class="cart-product-container-div">
            <p class="name-mobile-view">{{product.name}}</p>
            <div class="cat-pro-one-flex">
                <div class="cart-img">

                    <div class="cart-image-div">
                        <a href="/view-single-product/{{product._id}}"> <img src="/upload/{{product.image.[0].img}}"
                                alt=""></a>
                    </div>

                </div>
                <div class="cart-pro-name">
                    <p>{{product.name}}</p>
                </div>
                <div class="cart-other">
                    <div class="cart-other-div">

                        <p class="cart-price">price rs.{{product.price}}</p>

                        <div class="buttons-and-remove-flex">

                            <div class="quantity-button-flex">


                                <button class="-and-plusbutton"
                                    onclick="changeQuantity('{{product._id}}',-1)">-</button>

                                {{!-- <input class="-and-plusbutton quantity-input-cart" type="text" name=""
                                    id="inputValue" value="{{quantity}}"> --}}

                                <span id="{{product._id}}">{{quantity}}</span>

                                <button class="-and-plusbutton" onclick="changeQuantity('{{product._id}}',1)">+</button>
                            </div>

                            <a class="remove-buttton" href="">REMOVE</a>

                        </div>
                            {{!-- {{product.price }}*{{quantity}}  --}}
                        <p class="cart-total-price">Total rs.120</p>

                    </div>
                </div>
            </div>
        </div>
        {{/each}}


        <div class="note-and-checkout-container-flex-div">
            <div class="note-div-flex">
                <p class="text-area-heading">LEAVE A NOTE WITH YOUR ORDER</p>
                <textarea class="text-area"></textarea>
            </div>

            <div class="total-and-checkout-div">
                <p>Total</p>
                <p>RS.210.00</p>
                <p>Tax included and shipping calculated at checkout</p>
                <a href="">COUNTINUE SHOPPING</a>
                <br class="br-new-line">
                <button class="buy-now-button checkout-btn">CHECKOUT</button>
            </div>
        </div>

    </div>


    <script>

        function changeQuantity(proId, count) {
            console.log("cart id..", proId)
            console.log("pro id..", count)
            countnow = parseInt(count)

            let quantity = parseInt(document.getElementById(proId).innerHTML)

            // var quantity =parseInt( document.getElementById("inputValue").value)

            console.log("quantity span..", quantity)

            console.log("quantity from inner html..", quantity)

            $.ajax({
                url: '/change-product-quantity',
                data: {
                    proId: proId,
                    count: countnow
                },
                method: 'post',
                success: (response) => {
                    if (response.removeProduct) {
                        alert("Product Removed")
                        location.reload()
                    }
                    else {

                        console.log("else ..", countnow)

                        if (countnow == -1) {
                            console.log("count -1")

                            count = $("#cart-count").html();
                            count = parseInt(count) + -1;
                            $("#cart-count").html(count)
                        }
                        else {
                            console.log("count +1")

                            count = $("#cart-count").html();
                            count = parseInt(count) + 1;
                            $("#cart-count").html(count)

                        }

                        document.getElementById(proId).innerHTML = quantity + countnow


                        // document.getElementById("inputValue").innerHTML = quantity+count;


                    }
                }
            })
        }
        

    </script>